
# oci-fcos  

[![Docker-aarch64](https://github.com/yaroze/oci-fcos/actions/workflows/docker-aarch64.yml/badge.svg?branch=main)](https://github.com/yaroze/oci-fcos/actions/workflows/docker-aarch64.yml)
[![Docker-amd64](https://github.com/yaroze/oci-fcos/actions/workflows/docker-amd64.yml/badge.svg?branch=main)](https://github.com/yaroze/oci-fcos/actions/workflows/docker-amd64.yml)



- [oci-fcos](#oci-fcos)
  - [How to use](#how-to-use)
  - [Requirements](#requirements)
  - [Usage](#usage)
  - [FAQ](#faq)
    - [Why are you doing this?](#why-are-you-doing-this)
    - [Why Oracle Cloud? Did you turn to the dark side of the force?](#why-oracle-cloud-did-you-turn-to-the-dark-side-of-the-force)
    - [No, seriously. The cheapest?](#no-seriously-the-cheapest)
    - [Don't you have anything better to do?](#dont-you-have-anything-better-to-do)
    - [You should be ashamed! Your code sucks! Why are you making this public?](#you-should-be-ashamed-your-code-sucks-why-are-you-making-this-public)
  - [TODO](#todo)

This project fetches a FCOS qcow2 image and injects an ignition file generated by butane.


## How to use  

First, it **is assumed the butane file is edited** with your public key!

## Requirements  
This project was developed on ~~~Oracle Linux~~~ macOS Sequoia and:  

```bash
$ podman -v
podman version 3.4.2
```

## Usage

The code is constantly changing and new ideas pop up every now and then. So the usage might change every now and then.


```
Usage:
 ./script.sh [aarch64|amd64|both]

Examples:
 ./script.sh aarch64
 ./script.sh amd64
 ./script.sh both
 ```

 This will generate a `fcos_[aarch64|amd64].qcow2` ready to be uploaded to OCI.

## FAQ


### Why are you doing this?
First, because I want to.
Also, OCI doesn't seem to support ignition, so I had to find an automated way to customize my Fedora Core OS images in order to use them in OCI.


### Why Oracle Cloud? Did you turn to the dark side of the force?
Second question first:  
No, absolutely not.  


First question:  
Believe it or not, OCI has a lot of *Always Free* resources such as VMs, Object and Block storage, and Oracle databases. If you're not an Oracle person, you can always spin an Ampere VM with 4vCPU and 24GB of RAM for free and 10TB of in/egress also for free.

What other cloud provides does this [(**forever**)](https://docs.oracle.com/en-us/iaas/Content/FreeTier/freetier_topic-Always_Free_Resources.htm)?

Also, their block and object storage is quite cheap compared to AWS's. Take a look at [this](https://www.oracle.com/cloud/economics/).


So, first reason is cost. I don't want to spend a shitload of money to support my personal hobbies that won't be profitable at least for the time being. Also, my laptop runs on an ARM processor, so if I can use the same architecture on both sides, the better :)

Second reason is, I used to be an Oracle consultant, but I never had the chance of trying out their cloud.  
I did a ton of PL/SQL coding, Database 11g/12c Administration, performance tunning and worked a lot with WebLogic 11g/12c.

I'd love to have a RAC at home, just to play with it, but you know... I don't have much timâ‚¬ for that :D


So if I have the opportunity to have a small DBaaS, at least I can take that as an opportunity to learn APEX and have 20GB of storage for free.  

I can also run an XE on a VM for very cheap if I spin a burstable instance...

Either way, like any business, they need to make money out of the services they provide, so... it's kinda easy to start spending a few Euros every month, even on OCI.

I'm not into doing the same for AWS or Azure, at least for now.


### No, seriously. The cheapest?
At least for this hobby project, yes!

![costs](docs/costs.png)


### Don't you have anything better to do?
Of course, I have many better things I could be doing, but the truth is you'll loose the momentum if you stop.  
The world is transitioning to public clouds and I'm taking this as an opportunity to improve my Terraform and Ansible skills as well as containerization and Git itself.

### You should be ashamed! Your code sucks! Why are you making this public?
I'm not :). Yup, my code might suck.

I always say I'm here to learn and want to learn from people who know more than I. So please fork the repo, change the code and create a pull request. I'm totally open to suggestions :)

Now, it's my turn: Why are you here on GitHub?


## TODO

- [x] Create terraform to upload this to OCI
- [x] Create Ansible to run the image related stuff
- [ ] Deploy with GitHub Actions
- [ ] Do some proper documentation (requirements, etc)... - this will never be done...
- [ ] ~~***Containerize everything***~~ - Probably won't do. Unless someone asks :)
